<view class="container flex column">
  <view class="box flex column align-center justify-center">    
    <image class="paystatus" src="./../../../images/icons/succ@2x.png" />
    <text>{{detail.statusText}}</text>
  </view>
  <navigator url="/pages/events/detail/detail?id={{detail.raceId}}" class="box flex align-center space-between">
    <view class="flex-auto flex align-center">
      <image src="{{detail.racePic[0]}}" mode="aspectFill" class="image"></image>
      <view class="text flex column">
        <text class="title">{{detail.raceTitle}}</text>
        <text class="cate">{{detail.cateTitle}}</text>
      </view>
    </view>
    <van-icon class="flex-none" name="arrow" />
  </navigator>
  <view class="box">
    <view class="title">报名人资料：</view>
    <view class="list">
      <navigator url="/pages/register/form/view/view?orderId={{id}}&id={{item._id}}" class="cell flex align-center" wx:for="{{detail.profiles}}" wx:key="_id">
        <view class="flex-auto">
          <text>{{item.trueName}}</text>
          <text class="gray">（{{item.phoneNum}}）</text>
        </view>
        <view class="flex-none">
          <van-icon name="arrow" />
        </view>
      </navigator>
    </view>
  </view>
  <view class="box" wx:if="{{detail.teamTitle}}">
    <view class="title">团队：{{detail.teamTitle}}</view>
    <view class="list">
      <view class="cell flex align-center" wx:for="{{members}}" wx:key="_id">
        <view class="flex-auto">
          <text>{{item.trueName}}</text>
          <text class="gray">（{{item.phoneNum}}）</text>
        </view>
        <view class="flex-none">
          <text class="gray">（{{item.isTeamLeader ? '领队' : '队员'}}）</text>
        </view>
      </view>
    </view>
    <view class="ft flex justify-center align-center">
      <button class="button mini" open-type="share">邀请报名</button>
    </view>
  </view>
  <view class="box info">
    <view class="title">报名信息：</view>
    <view class="list">
      <view class="cell">
        <label>订单编号：</label>
        <text>{{detail.orderNum}}</text>
        <text bindtap="copyText" data-text="{{detail.orderNum}}" class="copy">复制</text>
      </view>
      <view class="cell">
        <label>订单时间：</label>
        <text>{{detail.orderTime}}</text>
      </view>
      <view class="cell">
        <label>报名类别：</label>
        <text>{{detail.groupText}}</text>
      </view>
      <view class="cell">
        <label>报名组别：</label>
        <text>{{detail.cateTitle}}</text>
      </view>
      <view class="cell" wx:if="{{detail.teamTitle}}">
        <label>团队名：</label>
        <text>{{detail.teamTitle}}</text>
      </view>
      <view class="cell">
        <label>报名费用：</label>
        <text>￥{{detail.totalFee}}</text>
      </view>
      <view class="cell">
        <label>优惠金额：</label>
        <text>￥{{detail.discountFee}}</text>
      </view>
      <view class="cell">
        <label>实付费用：</label>
        <text class="price">￥{{detail.totalFee}}</text>
      </view>
      <view class="cell">
        <label>付款方式</label>
        <text>微信支付</text>
        <image src="/images/icons/wepay.svg" class="icon" />
      </view>
      <view class="cell">
        <label>订单状态：</label>
        <text>{{detail.statusText}}</text>
      </view>
    </view>
    <view class="ft flex justify-end align-center">
      <button bindtap="redirect" disabled="{{!refundEnabled}}" data-url="/pages/register/refund/refund?id={{detail._id}}" class="button secondary mini" wx:if="{{showRefundBtn}}">{{detail.raceType === 'X-Plogging' ? '取消活动' : '申请退款'}}</button>
      <button bindtap="confirmOrder" wx:if="{{showPayBtn}}" class="button mini">立即支付</button>
      <button bindtap="redirect" data-url="/pages/my/registration/registration" class="button mini">我的报名</button>
    </view>
  </view>
</view>
